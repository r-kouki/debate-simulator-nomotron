# Debugging Guide: Arguments Not Showing

## The Issue
Arguments are being generated by the backend but not appearing in the PRO/CON panels in the frontend.

## How to Debug

### 1. Start the servers

**Terminal 1 - Backend:**
```bash
cd /home/remote-core/project/debate-simulator-nomotron
source .venv/bin/activate
python scripts/run_xp_server.py
```

Wait for: `‚úì Models preloaded successfully!`

**Terminal 2 - Frontend:**
```bash
cd frontend-xp
npm run dev
```

### 2. Open Browser Console

1. Open http://localhost:5173
2. Press **F12** to open Developer Tools
3. Go to the **Console** tab
4. Click "New Debate" and start a debate

### 3. Check Console Output

You should see messages like:

#### Expected Output (Working):
```
[SSE Event] {type: "debate_started", ...}
[SSE Event] {type: "log", message: "Classifying topic domain..."}
[SSE Event] {type: "argument", side: "pro", content: "...", round: 1}
[SSE Argument] {type: "argument", side: "pro", round: 1, hasContent: true, contentLength: 450}
[SSE] Current debate state: {debateId: "debate-xxx", found: true, proArgsCount: 0, conArgsCount: 0}
[SSE] Updating PRO arguments: 1
```

#### Problem Scenarios:

**A. No argument events received:**
```
[SSE Event] {type: "log", ...}  ‚Üê Only log events, no "argument" type
```
‚Üí **Issue:** Backend isn't sending argument events via SSE

**B. Argument events malformed:**
```
[SSE Event] {type: "argument", side: undefined, content: undefined}
[SSE] Invalid argument data received
```
‚Üí **Issue:** Backend SSE format is wrong

**C. Store update fails:**
```
[SSE Event] {type: "argument", side: "pro", ...}
[SSE] Debate not found in store: debate-xxx
```
‚Üí **Issue:** Debate wasn't added to Zustand store properly

**D. Store updates but component doesn't re-render:**
```
[SSE] Updating PRO arguments: 1
[SSE] Updating PRO arguments: 2
```
But the UI still shows "Waiting for arguments..."
‚Üí **Issue:** Zustand subscription not working

### 4. Check Backend Logs

In Terminal 1 (backend), you should see:
```
[INFO] Using preloaded crew (models already in memory)
[1/6] Routing domain...
  ‚Üí Domain: education (confidence: 0.95)
[2/6] Gathering research...
  ‚Üí Research gathered (93 chars)
[3/6] Running 2 debate rounds...
  Round 1:
    PRO: Sure, I'd be happy to help! Here's my PRO argument...
    CON: Con: While coding is beneficial...
```

### 5. Check Network Tab

1. Go to **Network** tab in DevTools
2. Filter by "stream"
3. Click on the stream request
4. Go to **EventStream** tab
5. You should see events appearing in real-time

### 6. Common Issues

| Symptom | Likely Cause | Fix |
|---------|--------------|-----|
| "Connection failed" in logs panel | Backend not running | Start `python scripts/run_xp_server.py` |
| Only "log" events, no "argument" events | Callback not firing | Check backend terminal for errors |
| Argument events received but UI doesn't update | Zustand subscription issue | Check console for store debug messages |
| Arguments appear then disappear | Store is being reset | Check for duplicate debate IDs |

### 7. Emergency Test

To verify the backend is sending argument events correctly:

```bash
cd /home/remote-core/project/debate-simulator-nomotron
source .venv/bin/activate
python test_xp_streaming.py
```

You should see:
```
üéØ ARGUMENT #1 RECEIVED (PRO, Round 1): ...
üéØ ARGUMENT #2 RECEIVED (CON, Round 1): ...
```

If this works but the frontend doesn't, the issue is in the frontend SSE handling or Zustand store.

## Report Back

When reporting the issue, include:

1. **Frontend Console Output**: Copy all messages starting with `[SSE Event]` and `[SSE]`
2. **Backend Terminal Output**: Last 50 lines from the backend server
3. **Network Tab**: Screenshot of the EventStream tab
4. **Browser**: Which browser and version you're using

This will help identify exactly where the pipeline is breaking!
